// WordPress uses two instances of .nav-menu:
// one is for the default navigation as: <div class="nav-menu"><ul><li>...
// second is if you use a custom menu as: <ul class="nav-menu"><li>...
// As general usage for WordPress and others (like plain HTML), refer to .nav-menu as div.nav-menu
// and the <ul> as .nav-menu > ul


div.nav-menu {
    position: relative;
    z-index: 900;

    > ul {

        > {
            
            .page_item_has_children,
            .menu-item-has-children {

                &.status-sub-nav-inactive:after {
                    @include mq($tablet, ieFixOn) {
                        @include background-image-icon('../img/more.svg');
                        opacity: .25;
                    }
                }

                &.status-sub-nav-inactive:hover:after {

                    // Non-mobile mode
                    @include mq($tablet, ieFixOn) {
                        opacity: .5;
                    }

                }

            }
            
        }

    }

    .status-mobile-main-nav-active & {

        // Mobile mode
        @include mq($tablet, $query1: max) {
            @include size(100%);
            background-color: $color-primary;
            overflow-x: hidden;
            overflow-y: auto;

            li, a {
                color: $white;
            }

        }

    }        

    ul {        
        @extend %unlist;
    }

    > ul {

        // Non-mobile mode
        @include mq($tablet, ieFixOn) {
            @include center-list;
        }

    }

    li {
        margin-bottom: auto;

        // Non-mobile mode
        @include mq($tablet, ieFixOn) {
            vertical-align: top;
        }

        &:last-child {
            margin-right: auto;
        }

    }

    a {
        display: block;
        padding: 1rem;
        @include transition-bg-color;  

        &:hover {

            // Mobile mode
            @include mq($tablet, $query1: max) {
                text-decoration: none;
            }

        }
    }

    .children, .sub-menu {
        @include vhide;
    }

    .page_item_has_children, .menu-item-has-children {
        position: relative;

        &:hover {

            // Mobile mode
            @include mq($tablet, $query1: max) {
                background-color: $darken15;
            }

        }

        > a {
            margin-right: $block-l;

            // Non-mobile mode
            @include mq($tablet, ieFixOn) {
                padding-right: 0;
            }

        }

        &:hover {
            cursor: pointer;
        }

        // Pseudo-element for the more icon
        &:after {                    
            $icon-size: .75rem;
            @include sudo-ct;
            @include position-offset($icon-size);
            @include size($icon-size);                
            @include transition(opacity);
            margin-right: 1.35rem;
            opacity: .5;
            @include background-image-icon('../img/more-light.svg');

            // Mobile mode
            @include mq($tablet, $query1: max) {
                top: 1.65rem;
                @include size(1rem);
            }

        }

        // Light more icon
        &.status-sub-nav-active:after {
            @include transform(rotate(180deg));
        }

        &.status-sub-nav-active:hover:after {
            opacity: 1;
        }

        &.status-sub-nav-active {
            background-color: $color-primary;

            a {
                color: $white;

                &:hover {
                    text-decoration: none;
                }

            }

            > {

                * {
                    color: $white;
                }

                .children,
                .sub-menu {                        
                     @include vhide-rev;
                }

            }

            .children,
            .sub-menu {
                background-color: $color-primary;
                text-align: left;

                // Non-mobile mode
                @include mq($tablet, ieFixOn) {
                    @include position($t: 100%);
                    min-width: 100%;
                    white-space: nowrap;
                    
                    // Folding list
                    margin-top: -.5rem;
                    margin-left: .5rem;
                    border: $one solid $white;
                }

                li:hover {
                    background-color: $darken15;
                }

            }

        }            

        > {

            .children,
            .sub-menu {                        
                @include vhide;
            }

        }

    }

}
    



.main-navigation-heading {
    margin-bottom: auto;
    
    // Mobile mode
    @include mq($tablet, $query1: max) {    
        @include font-size-rem($font-reset);
        @include size($block-l);
        @include svg-iconize;        
    }
    
    // Non-mobile mode
    @include mq($tablet, ieFixOn) {
        @include vhide;
    }
    
    .icon {
        // Mobile mode
        @include mq($tablet, $query1: max) {

            @include size($block-s);
            @include transition(fill);

            .modernizr-no-inlinesvg & {
                @include vhide-rev;
            }

        }
    }
    
    &:hover {
        // Mobile mode
        @include mq($tablet, $query1: max) {
            cursor: pointer;
        }
    }
    
    .label {
        // Mobile mode
        @include mq($tablet, $query1: max) {
            @include vhide;
        }
    }

}

.main-navigation-ct {
    
    // Mobile mode
    @include mq($tablet, $query1: max) {
        position: fixed;
        left: 0;
        bottom: 0;        
        padding-top: $block-l;
        @include size(100%);
        @include transform(translate(0, 100%));
        text-align: left;
        z-index: 100;        
    }

    .status-mobile-main-nav-active & {
        
        // Mobile mode
        @include mq($tablet, $query1: max) {
            @include transform(translate(0, 0));
        }
        
    }

}