// Search Lightsaber

// Default State
.hs-template__search--poppy-seeds {
    
    // Conditional: JS Enabled
    &.modernizr--js
    {    
        // Default State
        .masthead_sidebar
        {
            .search_comp
            {
                position: absolute;
                top: 0;
                right: 0;
                width: 100%;
            }

            .search-form-submit_axn .verb_label,
            .search-form-reset_axn .verb_label
            {
                @extend %hs-patch--visually-hidden !optional;
            }
            
            .search-form-submit_axn,
            .search-form-reset_axn
            {
                @extend %hs-reset--deflate !optional;
            }

            // Make container for the inline icon
            .search-form_label,
            .search-form-submit_axn,
            .search-form-reset_axn
            {    
                @extend %hs-nature--inline-icon-cr !optional;
                
                // Counter-Effect
                @include dimensions( $utility-block );
                
                // Temp
                // background-color: yellow;
            }

            .search_icon
            {
                @extend %hs-nature--inline-icon !optional;
            }
            
            .widget_search
            {
                .widget_cr
                {
                    // Counter-Effect
                    padding: 0;
                }
            }
            
            .dismiss_icon
            {
                @include dimensions( 1.25rem );
            }
            
            .search-form-input_field
            {
                // Reset
                margin-top: 0;
            }
        }
        
        // Narrow Viewport
        &.hs-viewport--narrow
        {   
            // Web Product Header            
            .web-product-header_cr
            {
                padding-left: $utility-block;
                padding-right: $utility-block;
            }
        }

        // Wide Viewport
        &.hs-viewport--wide
        {
            .masthead_sidebar
            {
                .search_comp
                {
                    width: 20rem;
                }
            }
        }

        // If Hamburger Template and Narrow Viewport
        &.hs-template__primary-nav-masthead-sidebar--hamburger.hs-viewport--narrow
        {
            .hs-state__search_poppy-seeds--active
            {
                .masthead_sidebar
                {
                    .search-form-input-field_cr
                    {
                        padding-left: $utility-block;
                    }
                }
            }
        }
        
        &.hs-template__primary-nav-masthead-sidebar--hamburger
        {
            .masthead_sidebar
            {
                .widget_search
                {
                    // Counter-Effect
                    display: block;
                }
            }
        }
    }
}

// Inactive State
.hs-state__search_poppy-seeds--inactive
{
    // Conditional: JS Enabled
    .modernizr--js &
    {
        .masthead_sidebar
        {
            .search-form_label .subj_label,
            .search-form_input,
            .search-form-submit_axn
            {
                @extend %hs-patch--visually-hidden !optional;
            }

            .search-form-input_field {
                position: absolute;
                top: 0;
                right: 0;
            }
            
            // Reset Action
            .search-form-reset_axn
            {                
                @extend %hs-patch--visually-hidden !optional;
            }
        }
    }
    
    transition: all 1s ease;
}

// Active State
.hs-state__search_poppy-seeds--active
{
    // Conditional: JS Enabled
    .modernizr--js &
    {
        .masthead_sidebar
        {

            .search-form_label
            {
                @extend %hs-patch--visually-hidden !optional;
            }

            // Make way for the button icon
            .search-form-input-field_cr 
            {
                padding-right: $utility-block;
            }

            // Position the button icon
            .search-form-axn_field
            {
                position: absolute;
                top: 0;
                right: 0;
            }

            .search-form_input
            {
                @extend %hs-reset--deflate !optional;

                // Counter-effect
                padding: .5rem 1rem;
                
                // Make space for the Reset Action
                padding-right: $utility-block;
                
                height: $utility-block;
            }
            
            // Reset Action
            .search-form-reset_axn
            {                
                @extend %hs-patch--visually-hidden-reverse !optional;
                
                position: absolute;
                top: 0;
                right: 100%;
            }
        }
    }
    
    // Conditional: Narrow Viewport
    .modernizr--js.hs-viewport--narrow &
    {
        // Hide Web Product Header
        .web-product-header_comp
        {
            // Preserve the layout
            visibility: hidden;
        }
    }

    // Conditional: Hamburger Template Narrow Viewport
    .modernizr--js.hs-template__primary-nav-masthead-sidebar--hamburger.hs-viewport--narrow &
    {
        .search_comp
        {
            z-index: 990;
        }
        
        .primary-nav-masthead-sidebar-toggle_axn
        {
            z-index: 1000;
        }
    }
}